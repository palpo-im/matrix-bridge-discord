# Matrix-Discord Bridge Configuration

bridge:
  domain: "example.com"          # Matrix server domain
  port: 9005                      # Bridge service port
  bind_address: "0.0.0.0"        # Bind address
  homeserver_url: "https://matrix.example.com"  # Optional: custom homeserver URL

auth:
  bot_token: "YOUR_DISCORD_BOT_TOKEN"  # Discord bot token
  client_id: "YOUR_CLIENT_ID"           # Optional: OAuth client ID
  client_secret: "YOUR_CLIENT_SECRET"   # Optional: OAuth client secret

logging:
  level: "info"                   # Log level: trace, debug, info, warn, error
  format: "pretty"                # Log format: pretty, json
  file: null                      # Optional: log file path

database:
  # Database URL
  # The database type is automatically detected based on the prefix:
  #
  # PostgreSQL:
  #   - postgresql://user:password@localhost:5432/dbname
  #   - postgres://user:password@localhost:5432/dbname
  #
  # SQLite:
  #   - sqlite:///path/to/database.db
  #   - sqlite://data/matrix-bridge.db
  #
  # Examples:
  #   url: "postgresql://bridge_user:secure_password@localhost:5432/matrix_bridge"
  #   url: "sqlite:///data/matrix-bridge.db"
  #
  url: "postgresql://user:password@localhost/matrix_discord"

  # Connection pool settings (PostgreSQL only)
  max_connections: 10             # Maximum database connections
  min_connections: 1              # Minimum database connections

room:
  default_visibility: "public"   # Default room visibility
  room_alias_prefix: "_discord_"  # Prefix for Discord room aliases
  enable_room_creation: true      # Allow automatic room creation

channel:
  enable_channel_creation: true  # Allow automatic channel creation
  channel_name_format: "{guild_name} - {channel_name}"  # Channel name format
  topic_format: "Bridged from Matrix room {room_id}"   # Channel topic format

ghosts:
  username_template: "_discord_{user_id}"     # Matrix username template
  displayname_template: "{username}#{discriminator}"  # Display name template
  avatar_url_template: null                     # Optional: avatar URL template

metrics:
  enabled: false                  # Enable metrics collection
  port: 9090                     # Metrics port
  bind_address: "127.0.0.1"      # Metrics bind address
